{"ast":null,"code":"var _jsxFileName = \"/Users/Amina/Desktop/FoodApp/mystore-front-end/src/components/ShopStore/Products/Products.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as productActions from '../../../store/actions/productActions';\nimport { connect } from 'react-redux';\nimport './style.css';\nimport Product from './Product';\n\nclass Products extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      slug: 'Products'\n    };\n\n    this.getProducts = (categorySlug = '', filter = null) => {\n      this.props.getProducts(categorySlug, filter).then(response => {\n        console.log(response); // this.setState({\n        //     products: response.message\n        // })\n      });\n    };\n\n    this.applyFilter = filter => {\n      const slug = this.props.match.params.slug == 'all' ? '' : this.props.match.params.slug;\n      this.getProducts(slug, filter);\n    };\n  }\n\n  componentDidMount() {\n    const slug = this.props.match.params.slug == 'all' ? '' : this.props.match.params.slug;\n    this.getProducts(slug);\n    this.props.getCategories();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.params.slug != prevProps.match.params.slug) {\n      this.getProducts(this.props.match.params.slug);\n    }\n  }\n\n  categoryTree(categories) {\n    var categoriesAr = [];\n\n    for (var value of categories) {\n      categoriesAr.push(React.createElement(\"li\", {\n        key: value.slug,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/products/\".concat(value.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, value.name), value.children.length > 0 ? React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, this.categoryTree(value.children)) : null));\n    }\n\n    return categoriesAr;\n  }\n\n  render() {\n    const slug = Object.keys(this.props.match.params).length > 0 ? this.props.match.params.slug : this.state.slug;\n    return React.createElement(\"div\", {\n      className: \"Content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ContentTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"CategoryTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, slug)), React.createElement(\"div\", {\n      className: \"ContentBody\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"SideMenu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"SideMenuTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Filters\"), React.createElement(\"div\", {\n      className: \"Filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"FilterTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Categories\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.props.products.categories.length > 0 ? this.categoryTree(this.props.products.categories) : null)), React.createElement(\"div\", {\n      className: \"Filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"FilterTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.applyFilter({\n        price: 1\n      }),\n      className: \"FilterButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Low to High\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.applyFilter({\n        price: -1\n      }),\n      className: \"FilterButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"High to Low\")))), React.createElement(\"div\", {\n      className: \"MainContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ProductArea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.props.products.products.map(product => React.createElement(Product, {\n      key: product._id,\n      id: product._id,\n      name: product.name,\n      price: product.price,\n      productPic: product.productPic,\n      slug: product.slug,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getProducts: (categorySlug, filter) => dispatch(productActions.getProducts(categorySlug, filter)),\n    getCategories: () => dispatch(productActions.getCategories())\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    products: state.products\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);","map":{"version":3,"sources":["/Users/Amina/Desktop/FoodApp/mystore-front-end/src/components/ShopStore/Products/Products.js"],"names":["React","Component","Link","productActions","connect","Product","Products","state","slug","getProducts","categorySlug","filter","props","then","response","console","log","applyFilter","match","params","componentDidMount","getCategories","componentDidUpdate","prevProps","categoryTree","categories","categoriesAr","value","push","name","children","length","render","Object","keys","products","price","map","product","_id","productPic","mapDispatchToProps","dispatch","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as productActions from '../../../store/actions/productActions';\nimport { connect } from 'react-redux';\nimport './style.css';\nimport Product from './Product';\n\nclass Products extends Component{\n\n    state = {\n        slug: 'Products'\n    }\n\n    componentDidMount() {\n        const slug = this.props.match.params.slug == 'all' ? '' : this.props.match.params.slug\n        this.getProducts(slug);\n        this.props.getCategories();\n    }\n\n    getProducts = (categorySlug = '', filter = null) => {\n       \n        this.props.getProducts(categorySlug, filter)\n        .then(response => {\n\n            console.log(response);\n\n            // this.setState({\n            //     products: response.message\n            // })\n        });\n    }\n\n    componentDidUpdate(prevProps){\n        if(this.props.match.params.slug != prevProps.match.params.slug){\n            this.getProducts(this.props.match.params.slug);\n        }\n\n        \n    }\n\n    applyFilter = (filter) => {\n        const slug = this.props.match.params.slug == 'all' ? '' : this.props.match.params.slug\n        this.getProducts(slug, filter);\n    }\n\n    categoryTree(categories){\n        var categoriesAr = [];\n        for(var value of categories){\n\n            categoriesAr.push(\n                    <li key={value.slug}>\n                        <Link to={`/products/${value.slug}`}>{value.name}</Link>\n                        {value.children.length > 0 ? (<ul>{this.categoryTree(value.children)}</ul>) : null}\n                    </li>\n            );\n        }\n\n        return categoriesAr;\n    }\n\n    render() {\n\n        const slug = Object.keys(this.props.match.params).length > 0 ? this.props.match.params.slug : this.state.slug;\n\n        \n        \n        return (\n\n            <div className=\"Content\">\n                    <div className=\"ContentTitle\">\n                        <h2 className=\"CategoryTitle\">{slug}</h2>\n                    </div>\n                    <div className=\"ContentBody\">\n                        <div className=\"SideMenu\">\n                            <h3 className=\"SideMenuTitle\">Filters</h3>\n                            <div className=\"Filter\">\n                                <p className=\"FilterTitle\">Categories</p>\n                                <ul>\n                                    {\n                                        this.props.products.categories.length > 0 ? \n                                        this.categoryTree(this.props.products.categories) : null\n                                    }\n                                </ul>\n                            </div>\n                            \n                           <div className=\"Filter\">\n                               <p className=\"FilterTitle\">Price</p>\n                               <div>\n                                    <button onClick={() => this.applyFilter({price:1} )} className=\"FilterButton\">Low to High</button>\n                               </div>\n                               <div>\n                                    <button onClick={() => this.applyFilter({price: -1})} className=\"FilterButton\">High to Low</button>\n                               </div>\n                               \n                           </div>\n                       \n                        </div>\n                        \n                        <div className=\"MainContent\">\n\n                        <div className=\"ProductArea\">\n                            {\n                                this.props.products.products.map(product => <Product\n                                    key={product._id}\n                                    id={product._id}\n                                    name={product.name}\n                                    price={product.price}\n                                    productPic={product.productPic}\n                                    slug={product.slug}\n                                />)\n                            }\n                            \n                        </div>\n\n                            \n                        </div>\n\n                    </div>\n                </div>\n            \n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        getProducts: (categorySlug, filter) => dispatch(productActions.getProducts(categorySlug, filter)),\n        getCategories: () => dispatch(productActions.getCategories())\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        products: state.products\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);"]},"metadata":{},"sourceType":"module"}